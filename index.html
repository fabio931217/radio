<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Security-Policy" content="default-src *; script-src 'self' 'unsafe-inline' 'unsafe-eval' *; style-src  'self' 'unsafe-inline' *">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

    <title>Enri</title>

    <!-- compiled css output -->
    
    <link href="css/ionic.app.css" rel="stylesheet">


    <!-- ionic/angularjs js -->
    <script src="lib/ionic/js/ionic.bundle.js"></script>

    <!-- angular-nl2br js -->
    <script src="lib/angular-nl2br/angular-nl2br.min.js"></script>

    <!-- elastic js-->
    <script src="lib/angular-elastic/elastic.js"></script>

    <!-- cordova script (this will be a 404 during development) -->
   <!-- <script src="cordova.js"></script>-->
    
    <script src = "lib/ngCordova/dist/ng-cordova.js"> </script> 
    <script src="https://cdn.rawgit.com/alertifyjs/alertify.js/v1.0.6/dist/js/alertify.js"></script>
    <script type="text/javascript" src="js/all.js"></script>
    <script src="https://cdn.rawgit.com/alertifyjs/alertify.js/v1.0.6/dist/js/ngAlertify.js"></script>
    <link rel="stylesheet" type="text/css" href="css/alertify.css">
    <script type="text/javascript" src="js/angular.min.js"> </script>
    <script type="text/javascript" src="js/eventos.js"> </script>
    <script type="text/javascript" src="js/angular-file-upload.js"> </script>
    <script src="ngCordova/dist/ng-cordova.js"></script>
    <script src="ng-cordova-oauth/dist/ng-cordova-oauth.js"></script>

    <script src="lib/ionic-service-core/ionic-core.js"></script>  
    <script src="lib/ionic-service-push/ionic-push.js"></script> 


  <!-- <script src="node_modules/socket.io/node_modules/socket.io-client/socket.io.js"></script>  -->
  <script src="http://chat.socket.io/socket.io/socket.io.js"></script>
    
    <!-- Other Libraries-->
    <script src="lib/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="lib/angular-socket-io/socket.js"></script>
   
 <!-- <script src="js/strim.js"></script> -->


    <!-- your app's js -->
    
    <script src="js/app.js"></script>
    <!--<script src="server.js"></script>-->
    <script src="js/controllers.js"></script>
    <script src="js/services.js"></script>
    <script src="js/eventos.js"></script> 
    <script src="js/cordova.js"></script>

        <script type="text/javascript">
        
var playButton;
var stopButton;
var activityIndicator;
var textPosition;

function onError(error) 
{
  console.log(error.message);
}

function onConfirmRetry(button) {
  if (button == 1) {
    html5audio.play();
  }
}

function pad2(number) {
  return (number < 10 ? '0' : '') + number
}

var myaudioURL = 'http://69.64.58.8:8003/;stream.mp3';
var myaudio = new Audio(myaudioURL);
var isPlaying = false;
var readyStateInterval = null;

var html5audio = {
  play: function()
  {
    isPlaying = true;
    myaudio.play();
  
    readyStateInterval = setInterval(function(){
       if (myaudio.readyState <= 2) {
         //playButton.style.display = 'none';
         //activityIndicator.style.display = 'block';
         //textPosition.innerHTML = 'loading...';
       }
    },1000);
    myaudio.addEventListener("timeupdate", function() {
       var s = parseInt(myaudio.currentTime % 60);
       var m = parseInt((myaudio.currentTime / 60) % 60);
       var h = parseInt(((myaudio.currentTime / 60) / 60) % 60);
       if (isPlaying && myaudio.currentTime > 0) {
         //textPosition.innerHTML = pad2(h) + ':' + pad2(m) + ':' + pad2(s);
       }
    }, false);
    myaudio.addEventListener("error", function() {
       console.log('myaudio ERROR');
    }, false);
    myaudio.addEventListener("canplay", function() {
       console.log('myaudio CAN PLAY');
    }, false);
    myaudio.addEventListener("waiting", function() {
       //console.log('myaudio WAITING');
       isPlaying = false;
      // playButton.style.display = 'none';
       //stopButton.style.display = 'none';
       //activityIndicator.style.display = 'block';
    }, false);
    myaudio.addEventListener("playing", function() {
       isPlaying = true;
       //playButton.style.display = 'none';
       //activityIndicator.style.display = 'none';
       //stopButton.style.display = 'block';
    }, false);
    myaudio.addEventListener("ended", function() {
       //console.log('myaudio ENDED');
       html5audio.stop();
       // navigator.notification.alert('Streaming failed. Possibly due to a network error.', null, 'Stream error', 'OK');
       // navigator.notification.confirm(
       // 'Streaming failed. Possibly due to a network error.', // message
       // onConfirmRetry, // callback to invoke with index of button pressed
       // 'Stream error', // title
       // 'Retry,OK'    // buttonLabels
       // );
       if (window.confirm('Streaming failed. Possibly due to a network error. Retry?')) {
        onConfirmRetry();
       }
    }, false);
  },
  pause: function() {
    isPlaying = false;
    clearInterval(readyStateInterval);
    myaudio.pause();
    //stopButton.style.display = 'none';
    //activityIndicator.style.display = 'none';
    //playButton.style.display = 'block';
  },
  stop: function() {
    isPlaying = false;
    clearInterval(readyStateInterval);
    myaudio.pause();
    //stopButton.style.display = 'none';
    //activityIndicator.style.display = 'none';
    //playButton.style.display = 'block';
    myaudio = null;
    myaudio = new Audio(myaudioURL);
    //textPosition.innerHTML = '';
  }
};


</script>

    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body ng-app="starter" >
    <ion-side-menus>

      <!-- Center content -->
      <ion-side-menu-content>
        <ion-nav-bar class="bar-positive" align-title="center">
          <!-- Back button -->
       <ion-nav-back-button>
            Atras
        </ion-nav-back-button> 

          <!-- Burger button -->
          <div ng-controller = 'HomeCtrl'  > 
          <ion-nav-buttons side="left">
            <button class="button button-icon button-clear ion-navicon" menu-toggle="left" ng-click="(pruebaC())">
            </button>
          </ion-nav-buttons>
          </div>

          <!-- Cart button -->
          <ion-nav-buttons side="right">
            <button class="button button-icon button-clear ion-ios-email-outline" ui-sref="chats">
            </button>
          </ion-nav-buttons>
        </ion-nav-bar>

        <!-- Main view content -->
        <ion-nav-view animation="slide-left-right"></ion-nav-view>
      </ion-side-menu-content>

      <!-- Left menu -->
      <ion-side-menu side="left" >

        <ion-content>

  
          <div class="text-center" ng-controller = 'HomeCtrl' >

            <a ui-sref="user">
              <img class="profile-picture" menu-close="" src="" id="img_usuario">
              <h4 id="nombre_usuario"></h4>
            </a>

          </div>
                  
           <iframe src="http://www.marioenturadio.com/audioenvivo/salsa/index.html" style="height:200px;width:90%">
       <p>Your browser does not support iframes.</p>
      </iframe>
        

          <div class="list" menu-close="">
            <div class="item item-icon-left" ui-sref="inicio">
              <i class="icon ion-ios-home-outline" style="color:#3ec3d6"></i>
              Inicio
          </div>


            <div class="item item-icon-left" ui-sref="home">
              <i class="icon ion-ios-information-outline"  style="color:#3ec3d6"></i>
              Noticias
            </div>


            <div class="item item-icon-left" ui-sref="stream">
              <i class="icon ion-radio-waves" style="color:#3ec3d6"></i>
              Emisora
            </div>


            <div class="item item-icon-left" ui-sref="chats">
              <i class="icon ion-chatbubbles" style="color:#3ec3d6"></i>
              Chats
              <span class="badge badge-assertive" style="color:#3ec3d6"></span>
            </div>
            
          
            <div class="item item-icon-left" ui-sref="contacts">
              <i class="icon ion-android-contacts" style="color:#3ec3d6"></i>
              Contactos
            </div>

            <div class="item item-icon-left" ui-sref="solicitudes">
              <i class="icon ion-android-notifications" style="color:#3ec3d6"></i>
              Mis solicitudes
            </div>

             <div class="item item-icon-left" ui-sref="setting">
              <i class="icon ion-ios-gear-outline" style="color:#3ec3d6"></i>
              Configuracion
            </div>

            <div class="item item-icon-left" ui-sref="acercade">
              <i class="icon ion-ios-help-outline" style="color:#3ec3d6"></i>
              Acerca de
            </div>

             <div class="item item-icon-left"  ng-controller="AuthCtrl" ng-click="login_q()">
              <i class="icon ion-log-out"  style="color:#3ec3d6"></i>
              Salir
            </div>
            
          </div>

        </ion-content>

      </ion-side-menu>

    </ion-side-menus>
  </body>
</html> 
